<link rel="import" href="../bower_components/polymer-redux/polymer-redux.html">

<script>
  const initialState = {
    nutrients: [ 'oink1', 'oink2', 'oink3' ],
    offline: navigator.onLine === false,
    nutrientsOfInterest: [],
    nutrientsOfInterestIsEmpty: true,
    nutrientsOfInterestCount: 0
  };

  const reducer = (state, action) => {
    if (!state) return initialState;
    switch (action.type) {
      // case 'ADD_NUTRIENT' :
      //   const nutrients = state.nutrients.slice(0);
      //   nutrients.push(action.nutrient);
      //   return Object.assign({}, state, { nutrients: nutrients });
      case 'LOAD_ALL_NUTRIENTS' :
        return Object.assign({}, state, { nutrients: action.nutrients });
      case 'GO_ONLINE' :
        return Object.assign({}, state, { offline: false });
      case 'GO_OFFLINE' :
        return Object.assign({}, state, { offline: true });
      case 'LOAD_ALL_NUTRIENTS_OF_INTEREST' :
        return Object.assign({}, state, { 
          nutrientsOfInterest: action.allNutrientsOfInterest,
          nutrientsOfInterestIsEmpty: action.allNutrientsOfInterest.length === 0,
          nutrientsOfInterestCount: action.allNutrientsOfInterest.length
        });
      default :
        console.warn("Invalid action type in redux store:", action.type);
    }
  };

  const store = Redux.createStore(reducer);
  //const ReduxBehavior = PolymerRedux(store);
  const ReduxMixin = PolymerRedux(store);
</script>
